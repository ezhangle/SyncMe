<html>
 <head>
  <script type="text/javascript" src="gwt-oauth2.js"></script>
 </head>
 <body>
   <!-- Comunicacion con oAuth utilizando JavaScript para recibir el token de acceso. -->
  <script type="text/javascript">
   ////////////////////////////////////////////////////////////////////////////
   // AUTENTICANDO CON GOOGLE //////////////////////////////////////////////
   ////////////////////////////////////////////////////////////////////////////
   (function() {
     var GOOGLE_AUTH_URL = "https://accounts.google.com/o/oauth2/auth";
     var GOOGLE_CLIENT_ID = "861466322111-54tn24tg5qrdifk51ej7is71jok2tb3i.apps.googleusercontent.com";
     var SYNCME_SCOPE = "http://docs.google.com/feeds https://www.googleapis.com/auth/userinfo.email";

     var button = document.createElement("button");
     var para = document.createElement("P");
     var t1;
     var t2;
     var t3;
     button.innerText = "SyncMe - Autorizar a la aplicaci√≥n con Google";
     button.onclick = function() {
       var req = {
         "authUrl" : GOOGLE_AUTH_URL,
         "clientId" : GOOGLE_CLIENT_ID,
         "scopes" : [ SYNCME_SCOPE ],
       };
       oauth2.login(req, function(token) {
         t1 = document.createTextNode("Token de acceso OAuth para SyncMe recibido:");
         t2 = document.createTextNode("" + token + "\n");
         t3 = document.createTextNode("Expira en " + oauth2.expiresIn(req) + " ms\n");
         document.body.removeChild(button);
         para.appendChild(t1);
         para.appendChild(t2);
         para.appendChild(t3);
         document.body.appendChild(para);
       }, function(error) {
         alert("Error:\n" + error);
       });
     };
     document.body.appendChild(button);

     var clearTokens = document.createElement("button");
     clearTokens.innerText = "Limpiar todos los tokens";
     clearTokens.onclick = oauth2.clearAllTokens;
     document.body.appendChild(clearTokens);
   })();
  </script>
 </body>
</html>
